<!DOCTYPE html>
<html> 
    <head> 
        <meta charset="utf-8">
        <meta name=""viewport" content="width=device-width, initial-scale=1">
        <title>Cheese Clicker</title> 
        <link rel="stylesheet" href="style.css">
    </head> 

    <body data-particle="images/8bitcheese.png">
            <nav><a href="games.html">Games</a> <a href="index.html">Home</a></nav>

            <h1>CHEESE GAME.</h1>

        <div class="sectionLeft">
            <center>
                <div class="scoreContainer unselectable">
                    <span id="score">0</span> cheese<br>
                    <span id="scorePerSecond">0</span> cheese per second
                </div>
                <br>
                <div class="clickerContainer unselectable">
                    <img src="images/cheese.jpg" height="256" width="256" onclick="addToScore(clickingPower)">
                </div>
                <button onclick="saveGame();">Save Game</button>
            </center>

            <div class="sectionFooter">
                <h5>Cheese Clicker</h5>
            </div>
        </div>

        <div class="sectionRight">
            <table class="shopButton unselectable" onclick="buyPan()">
                <tr>
                    <td id="image"><img src="images/pan.png"</td>
                    <td id="nameAndCost">
                        <p>Pan</p>
                        <p><span id="panCost">15</span> cheese</p>
                    </td>
                    <td id="amount"><span id="pans">0</span></td>
                </tr>
            </table>
            <table class="shopButton unselectable" onclick="buyCow()">
                <tr>
                    <td id="image"><img src="images/cow.webp"</td>
                    <td id="nameAndCost">
                        <p>Cow</p>
                        <p><span id="cowCost">100</span> cheese</p>
                    </td>
                    <td id="amount"><span id="cows">0</span></td>
                </tr>
            </table>
            <table class="shopButton unselectable" onclick="buyFromagerie()">
                <tr>
                    <td id="image"><img src="images/fromagerie-mr-fromage-nogent-sur-marne-la-fromagerie-500x500.png"></td>
                    <td id="nameAndCost">
                        <p>Fromagerie</p>
                        <p><span id="fromagerieCost">500</span> cheese</p>
                    </td>
                    <td id="amount"><span id="fromageries">0</span></td>
                </tr>
            </table>
        </div>

        <script>
            var score = 0;
            var panCost = 15;
            var pans = 0;
            var clickingPower = 2;
            var cowCost = 100
            var cows = 0
            var fromagerieCost = 500
            var fromageries = 0

            function buyPan(amount){
                if (score >= panCost) {
                    score = score - panCost;
                    pans = pans + 1;
                    panCost = Math.round(panCost * 1.15);

                    document.getElementById("score").innerHTML = score;
                    document.getElementById("panCost").innerHTML = panCost;
                    document.getElementById("pans").innerHTML = pans;
                    updateScorePerSecond();
                }
            }

            function buyCow(amount){
                if (score >= cowCost) {
                    score = score - cowCost;
                    cows = cows + 1;
                    cowCost = Math.round(cowCost * 1.15);

                    document.getElementById("score").innerHTML = score;
                    document.getElementById("cowCost").innerHTML = cowCost;
                    document.getElementById("cows").innerHTML = cows;
                    updateScorePerSecond();
                }
            }

            function buyFromagerie(amount){
                if (score >= fromagerieCost) {
                    score = score - fromagerieCost;
                    fromageries = fromageries + 1;
                    fromagerieCost = Math.round(fromagerieCost * 1.15);

                    document.getElementById("score").innerHTML = score;
                    document.getElementById("fromagerieCost").innerHTML = fromagerieCost;
                    document.getElementById("fromageries").innerHTML = fromageries;
                    updateScorePerSecond();
                }
            }


            function addToScore(amount) {
                score = score + amount;
                document.getElementById("score").innerHTML = score;
            }

            function updateScorePerSecond(){
                scorePerSecond = pans + (cows * 10) + (fromageries * 50);
                document.getElementById("scorePerSecond").innerHTML = scorePerSecond
            }

            function loadGame() {
                var savedGame = JSON.parse(localStorage.getItem("gameSave"));
                if (typeof savedGame.score !== "undefined") score = savedGame.score;
                if (typeof savedGame.clickingPower !== "undefined") clickingPower = savedGame.clickingPower;
                if (typeof savedGame.panCost !== "undefined") panCost = savedGame.panCost;
                if (typeof savedGame.pans !== "undefined") pans = savedGame.pans;
                if (typeof savedGame.cowCost !== "undefined") cowCost = savedGame.cowCost;
                if (typeof savedGame.cows !== "undefined") cows = savedGame.cows;
                if (typeof savedGame.fromagerieCost !== "undefined") fromagerieCost = savedGame.fromagerieCost;
                if (typeof savedGame.fromageries !== "undefined") fromageries = savedGame.fromageries;
            }

            function saveGame() {
                var gameSave = {
                    score: score,
                    clickingPower: clickingPower,
                    panCost: panCost,
                    pans: pans,
                    cowCost: cowCost,
                    cows: cows,
                    fromagerieCost: fromagerieCost,
                    fromageries: fromageries

                };
                localStorage.setItem("gameSave",  JSON.stingify(gameSave));
            }

            window.onload = function() {
                loadGame();
                updateScorePerSecond();
                document.getElementById("score").innerHTML = score;
                document.getElementById("panCost").innerHTML = panCost;
                document.getElementById("pans").innerHTML = pans;
                document.getElementById("cowCost").innerHTML = cowCost;
                document.getElementById("cows").innerHTML = cows;
                document.getElementById("fromagerieCost").innerHTML = fromagerieCost;
                document.getElementById("fromageries").innerHTML = fromageries;
            };

            setInterval(function() {     
                score = score + pans;
                score = score + cows * 10;
                score = score + fromageries * 50;
                document.getElementById("score").innerHTML = score;
            }, 1000); // 1000ms = 1 second

            setInterval(function() {
                saveGame();
            }, 30000) // 30000ms = 30 seconds
        </script>
    </body>
</html>